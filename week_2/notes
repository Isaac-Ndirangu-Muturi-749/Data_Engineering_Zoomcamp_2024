HashiCorp Terraform is an infrastructure as code tool that lets you
define both cloud and on-prem resources in human-readable
configuration files that you can version, reuse, and share. You can then
use a consistent workflow to provision and manage all of your
infrastructure throughout its lifecycle.


Why Terraform?

Simplicity in keeping track of infrastructure
Easier collaboration
Reproducibility
Ensure resources are removed


What Terraform is not-

· Does not manage and update code on infrastructure
. Does not give you the ability to change immutable resources
. Not used to manage resources not defined in your terraform files


What is Terraform?
· Infrastructure as code

What are providers?

Code that allows terraform to communicate to manage resources on
. AWS
· Azure
· GCP
· Kubernetes
· VSphere
· Alibaba Cloud
· Oracle Cloud Infrastructure
· Active Directory


Key Terraform Commands

. Init - Get me the providers I need

· Plan - What am I about to do?

. Apply - Do what is in the tf files

. Destroy - Remove everything defined in the tf files


wget -O- https://apt.releases.hashicorp.com/gpg | sudo gpg --dearmor -o /usr/share/keyrings/hashicorp-archive-keyring.gpg
echo "deb [signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] https://apt.releases.hashicorp.com $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/hashicorp.list
sudo apt update && sudo apt install terraform


export GOOGLE_CREDENTIALS='/home/ndirangu749/ZOOMCAMP/Data_Engineering_Zoomcamp_2024/week_2/terrademo/keys/my-creds.json'


terraform init


resource "google_storage_bucket" "auto-expire" {
  name          = "auto-expiring-bucket"
  location      = "US"
  force_destroy = true

  lifecycle_rule {
    condition {
      age = 3
    }
    action {
      type = "Delete"
    }
  }

  lifecycle_rule {
    condition {
      age = 1
    }
    action {
      type = "AbortIncompleteMultipartUpload"
    }
  }
}


